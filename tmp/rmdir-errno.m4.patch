--- dbg/find14/find/gnulib-cvs/gnulib/m4/rmdir-errno.m4	2020-01-28 23:47:42.000000000 -0600
+++ dbg/find6/find/gnulib-cvs/gnulib/m4/rmdir-errno.m4	2020-01-28 23:39:42.000000000 -0600
@@ -1,6 +1,6 @@
-#serial 4
+#serial 8
 
-# Copyright (C) 2000, 2001, Free Software Foundation, Inc.
+# Copyright (C) 2000, 2001, 2005, 2006 Free Software Foundation, Inc.
 # This file is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -10,10 +10,11 @@
 # ENOTEMPTY is mistakenly defined to be EEXIST.  To work around this, and
 # in general, to avoid depending on the use of any particular symbol, this
 # test runs a test to determine the actual numeric value.
-AC_DEFUN([fetish_FUNC_RMDIR_NOTEMPTY],
+AC_DEFUN([gl_FUNC_RMDIR_NOTEMPTY],
 [dnl
+  AC_CHECK_HEADERS_ONCE(unistd.h)
   AC_CACHE_CHECK([for rmdir-not-empty errno value],
-    fetish_cv_func_rmdir_errno_not_empty,
+    gl_cv_func_rmdir_errno_not_empty,
     [
       # Arrange for deletion of the temporary directory this test creates.
       ac_clean_files="$ac_clean_files confdir2"
@@ -21,8 +22,8 @@ AC_DEFUN([fetish_FUNC_RMDIR_NOTEMPTY],
       AC_TRY_RUN([
 #include <stdio.h>
 #include <errno.h>
-#ifndef errno
-extern int errno;
+#ifdef HAVE_UNISTD_H
+# include <unistd.h>
 #endif
 	int main ()
 	{
@@ -32,17 +33,17 @@ extern int errno;
 	  val = errno;
 	  s = fopen ("confdir2/errno", "w");
 	  fprintf (s, "%d\n", val);
-	  exit (0);
+	  return 0;
 	}
 	],
-      fetish_cv_func_rmdir_errno_not_empty=`cat confdir2/errno`,
-      fetish_cv_func_rmdir_errno_not_empty='configure error in rmdir-errno.m4',
-      fetish_cv_func_rmdir_errno_not_empty=ENOTEMPTY
+      gl_cv_func_rmdir_errno_not_empty=`cat confdir2/errno`,
+      gl_cv_func_rmdir_errno_not_empty='configure error in rmdir-errno.m4',
+      gl_cv_func_rmdir_errno_not_empty=ENOTEMPTY
       )
     ]
   )
 
   AC_DEFINE_UNQUOTED([RMDIR_ERRNO_NOT_EMPTY],
-    $fetish_cv_func_rmdir_errno_not_empty,
+    $gl_cv_func_rmdir_errno_not_empty,
     [the value to which errno is set when rmdir fails on a nonempty directory])
 ])
diff -up -r dbg/find14/find/gnulib-cvs/gnulib/m4/rmdir.m4 dbg/find6/find/gnulib-cvs/gnulib/m4/rmdir.m4
