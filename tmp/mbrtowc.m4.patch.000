--- dbg/find14/find/gnulib-cvs/gnulib/m4/mbrtowc.m4	2020-01-28 23:47:42.000000000 -0600
+++ dbg/find6/find/gnulib-cvs/gnulib/m4/mbrtowc.m4	2020-01-28 23:39:42.000000000 -0600
@@ -1,5 +1,5 @@
-# mbrtowc.m4 serial 7
-dnl Copyright (C) 2001-2002, 2004 Free Software Foundation, Inc.
+# mbrtowc.m4 serial 8
+dnl Copyright (C) 2001-2002, 2004-2005 Free Software Foundation, Inc.
 dnl This file is free software; the Free Software Foundation
 dnl gives unlimited permission to copy and/or distribute it,
 dnl with or without modifications, as long as this notice is preserved.
@@ -7,19 +7,25 @@ dnl with or without modifications, as lo
 dnl From Paul Eggert
 
 dnl This file can be removed, and gl_FUNC_MBRTOWC replaced with
-dnl AC_FUNC_MBRTOWC, when autoconf 2.57 can be assumed everywhere.
+dnl AC_FUNC_MBRTOWC, when autoconf 2.60 can be assumed everywhere.
 
 AC_DEFUN([gl_FUNC_MBRTOWC],
 [
+  dnl Same as AC_FUNC_MBRTOWC in autoconf-2.60.
   AC_CACHE_CHECK([whether mbrtowc and mbstate_t are properly declared],
     gl_cv_func_mbrtowc,
-    [AC_TRY_LINK(
-       [#include <wchar.h>],
-       [mbstate_t state; return ! (sizeof state && mbrtowc);],
+    [AC_LINK_IFELSE(
+       [AC_LANG_PROGRAM(
+            [[#include <wchar.h>]],
+            [[wchar_t wc;
+              char const s[] = "";
+              size_t n = 1;
+              mbstate_t state;
+              return ! (sizeof state && (mbrtowc) (&wc, s, n, &state));]])],
        gl_cv_func_mbrtowc=yes,
        gl_cv_func_mbrtowc=no)])
   if test $gl_cv_func_mbrtowc = yes; then
-    AC_DEFINE(HAVE_MBRTOWC, 1,
+    AC_DEFINE([HAVE_MBRTOWC], 1,
       [Define to 1 if mbrtowc and mbstate_t are properly declared.])
   fi
 ])
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbscasecmp.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbscasestr.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbschr.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbscspn.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbslen.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbsncasecmp.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbspbrk.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbspcasecmp.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbsrchr.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbssep.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbsspn.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbsstr.m4
Only in dbg/find6/find/gnulib-cvs/gnulib/m4: mbstok_r.m4
diff -up -r dbg/find14/find/gnulib-cvs/gnulib/m4/mbswidth.m4 dbg/find6/find/gnulib-cvs/gnulib/m4/mbswidth.m4
